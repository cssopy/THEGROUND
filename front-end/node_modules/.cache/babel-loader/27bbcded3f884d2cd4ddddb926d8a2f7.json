{"ast":null,"code":"// import { useEffect } from \"react\";\n// import { useLocation, useNavigate } from \"react-router-dom\";\n// import axios from \"axios\";\n// import { userActions } from \"../../slice/UserSlice\";\n// import { useDispatch } from \"react-redux/es/exports\";\n// const NaverLoginHandler = (props) => {\n//   const { loginType } = props;\n//   const navigate = useNavigate();\n//   const dispatch = useDispatch();\n//   const CLIENT_ID = \"PVGrBZM8vqHq_92Vh6Wx\";\n//   const CLIENT_SECRET = \"tSbysXbRL1\";\n//   // 인가코드\n//   const location = useLocation();\n//   const CODE = location.search.split(\"=\")[1];\n//   const STATE = location.search.split(\"=\")[2];\n//   // 네이버로 토큰 발급 요청\n//   const getNaverToken = () => {\n//     axios\n//       .post(\n//         `/token/?grant_type=authorization_code&client_id=${CLIENT_ID}&client_secret=${CLIENT_SECRET}&code=${CODE}&state=${STATE}`,\n//         {\n//           headers: {\n//             \"Content-Type\": \"application/x-www-form-urlencoded;charset=utf-8\",\n//           },\n//         },\n//         {\n//           responseType: \"json\",\n//         }\n//       )\n//       .then((res) => res.data)\n//       .then((data) => {\n//         // 액세스 토큰으로 로그인 요청\n//         if (data.access_token) {\n//           axios\n//             .post(\n//               \"https://j7d109.p.ssafy.io/back/users/login\",\n//               {\n//                 accessToken: data.access_token,\n//                 loginType: \"N\",\n//               },\n//               {\n//                 headers: {\n//                   \"Content-type\": \"application/json\",\n//                   Accept: \"application/json\",\n//                 },\n//               }\n//             )\n//             .then((res) => {\n//               if (res.data.message === \"회원가입을 먼저 해주세요.\") {\n//                 // 회원가입을 위해 uid를 저장 후 이동\n//                 // loginType은 로컬 스토리지에 있음\n//                 dispatch(userActions.setUid(res.data.uid));\n//                 navigate(\"/\");\n//               } else {\n//                 // jwt 토큰과 유저 이름을 저장 후 메인 페이지로 이동\n//                 dispatch(userActions.setJwt(res.data.jwt));\n//                 dispatch(userActions.setUserTeamname(res.data.userTeamname));\n//                 localStorage.removeItem(\"loginType\");\n//                 localStorage.setItem(\"jwt\", res.data.jwt);\n//                 navigate(\"/main\");\n//               }\n//             });\n//         } else {\n//           navigate(\"/\");\n//         }\n//       });\n//   };\n//   // 취소시 로직\n//   let error = new URL(window.location.href).searchParams.get(\n//     \"error_description\"\n//   );\n//   useEffect(() => {\n//     if (!CODE) return;\n//     if (loginType === \"N\") {\n//       getNaverToken();\n//     }\n//     if (error === \"Canceled By User\") {\n//       navigate(\"/\");\n//     }\n//   }, []);\n//   return <></>;\n// };\n// export default NaverLoginHandler;","map":{"version":3,"names":[],"sources":["C:/Users/multicampus/Desktop/projects/theground/front-end/src/landing/components/NaverLoginHandler.js"],"sourcesContent":["// import { useEffect } from \"react\";\r\n// import { useLocation, useNavigate } from \"react-router-dom\";\r\n// import axios from \"axios\";\r\n// import { userActions } from \"../../slice/UserSlice\";\r\n// import { useDispatch } from \"react-redux/es/exports\";\r\n\r\n// const NaverLoginHandler = (props) => {\r\n//   const { loginType } = props;\r\n//   const navigate = useNavigate();\r\n//   const dispatch = useDispatch();\r\n\r\n//   const CLIENT_ID = \"PVGrBZM8vqHq_92Vh6Wx\";\r\n//   const CLIENT_SECRET = \"tSbysXbRL1\";\r\n\r\n//   // 인가코드\r\n//   const location = useLocation();\r\n//   const CODE = location.search.split(\"=\")[1];\r\n//   const STATE = location.search.split(\"=\")[2];\r\n\r\n//   // 네이버로 토큰 발급 요청\r\n//   const getNaverToken = () => {\r\n//     axios\r\n//       .post(\r\n//         `/token/?grant_type=authorization_code&client_id=${CLIENT_ID}&client_secret=${CLIENT_SECRET}&code=${CODE}&state=${STATE}`,\r\n//         {\r\n//           headers: {\r\n//             \"Content-Type\": \"application/x-www-form-urlencoded;charset=utf-8\",\r\n//           },\r\n//         },\r\n//         {\r\n//           responseType: \"json\",\r\n//         }\r\n//       )\r\n//       .then((res) => res.data)\r\n//       .then((data) => {\r\n//         // 액세스 토큰으로 로그인 요청\r\n//         if (data.access_token) {\r\n//           axios\r\n//             .post(\r\n//               \"https://j7d109.p.ssafy.io/back/users/login\",\r\n//               {\r\n//                 accessToken: data.access_token,\r\n//                 loginType: \"N\",\r\n//               },\r\n//               {\r\n//                 headers: {\r\n//                   \"Content-type\": \"application/json\",\r\n//                   Accept: \"application/json\",\r\n//                 },\r\n//               }\r\n//             )\r\n//             .then((res) => {\r\n//               if (res.data.message === \"회원가입을 먼저 해주세요.\") {\r\n//                 // 회원가입을 위해 uid를 저장 후 이동\r\n//                 // loginType은 로컬 스토리지에 있음\r\n//                 dispatch(userActions.setUid(res.data.uid));\r\n//                 navigate(\"/\");\r\n//               } else {\r\n//                 // jwt 토큰과 유저 이름을 저장 후 메인 페이지로 이동\r\n//                 dispatch(userActions.setJwt(res.data.jwt));\r\n//                 dispatch(userActions.setUserTeamname(res.data.userTeamname));\r\n//                 localStorage.removeItem(\"loginType\");\r\n//                 localStorage.setItem(\"jwt\", res.data.jwt);\r\n//                 navigate(\"/main\");\r\n//               }\r\n//             });\r\n//         } else {\r\n//           navigate(\"/\");\r\n//         }\r\n//       });\r\n//   };\r\n\r\n//   // 취소시 로직\r\n//   let error = new URL(window.location.href).searchParams.get(\r\n//     \"error_description\"\r\n//   );\r\n\r\n//   useEffect(() => {\r\n//     if (!CODE) return;\r\n//     if (loginType === \"N\") {\r\n//       getNaverToken();\r\n//     }\r\n//     if (error === \"Canceled By User\") {\r\n//       navigate(\"/\");\r\n//     }\r\n//   }, []);\r\n\r\n//   return <></>;\r\n// };\r\n\r\n// export default NaverLoginHandler;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA"},"metadata":{},"sourceType":"module"}