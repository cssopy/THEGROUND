{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\multicampus\\\\Desktop\\\\projects\\\\theground\\\\front-end\\\\src\\\\landing\\\\components\\\\KakaoLoginHandler.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst KakaoLoginHandler = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const REST_API_KEY = \"df92f033940b721122d9a6a84759896b\";\n  const REDIRECT_URI = \"http://localhost:3000/kakaoLogin\"; //인가코드\n\n  let code = new URL(window.location.href).searchParams.get(\"code\"); //카카오로 토큰 발급 요청\n\n  const getKakaoToken = () => {\n    fetch(\"https://kauth.kakao.com/oauth/token\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded;charset=utf-8\"\n      },\n      body: `grant_type=authorization_code&client_id=${REST_API_KEY}&redirect_uri=${REDIRECT_URI}&code=${code}`\n    }).then(res => res.json()).then(data => {\n      if (data.access_token) {\n        //서버로 전송\n        fetch(\"https://j7d109.p.ssafy.io/back/users/login\", {\n          method: \"POST\",\n          headers: {\n            \"Content-type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            accessToken: data.access_token,\n            loginType: \"K\"\n          })\n        }) // axios\n        //   .post(\n        //     \"https://j7d109.p.ssafy.io/back/users/login\",\n        //     {\n        //       accessToken: data.access_token,\n        //       loginType: \"K\",\n        //     },\n        // {\n        //   headers: {\n        //     \"Content-type\": \"application/json\",\n        //     Accept: \"application/json\",\n        //   },\n        // },\n        // )\n        .then(res => res.json()).then(data => {\n          if (data.message === \"회원가입을 먼저 해주세요.\") {\n            //main으로 보내고 거기서 모달 띄우는 방법??\n            navigate(\"/signupModal\");\n          } else {\n            navigate(\"/main\");\n          }\n        });\n      } else {\n        navigate(\"/\");\n      }\n\n      return 0;\n    });\n  };\n\n  useEffect(() => {\n    if (!code) return;\n    getKakaoToken();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\uCE74\\uCE74\\uC624 \\uB85C\\uADF8\\uC778 \\uC911\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 10\n  }, this);\n};\n\n_s(KakaoLoginHandler, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n\n_c = KakaoLoginHandler;\nexport default KakaoLoginHandler;\n\nvar _c;\n\n$RefreshReg$(_c, \"KakaoLoginHandler\");","map":{"version":3,"names":["useEffect","useNavigate","axios","KakaoLoginHandler","navigate","REST_API_KEY","REDIRECT_URI","code","URL","window","location","href","searchParams","get","getKakaoToken","fetch","method","headers","body","then","res","json","data","access_token","JSON","stringify","accessToken","loginType","message"],"sources":["C:/Users/multicampus/Desktop/projects/theground/front-end/src/landing/components/KakaoLoginHandler.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst KakaoLoginHandler = () => {\r\n  const navigate = useNavigate();\r\n  const REST_API_KEY = \"df92f033940b721122d9a6a84759896b\";\r\n  const REDIRECT_URI = \"http://localhost:3000/kakaoLogin\";\r\n  //인가코드\r\n  let code = new URL(window.location.href).searchParams.get(\"code\");\r\n\r\n  //카카오로 토큰 발급 요청\r\n  const getKakaoToken = () => {\r\n    fetch(\"https://kauth.kakao.com/oauth/token\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded;charset=utf-8\",\r\n      },\r\n      body: `grant_type=authorization_code&client_id=${REST_API_KEY}&redirect_uri=${REDIRECT_URI}&code=${code}`,\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.access_token) {\r\n          //서버로 전송\r\n          fetch(\"https://j7d109.p.ssafy.io/back/users/login\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n              accessToken: data.access_token,\r\n              loginType: \"K\",\r\n            }),\r\n          })\r\n          // axios\r\n          //   .post(\r\n          //     \"https://j7d109.p.ssafy.io/back/users/login\",\r\n          //     {\r\n          //       accessToken: data.access_token,\r\n          //       loginType: \"K\",\r\n          //     },\r\n              // {\r\n              //   headers: {\r\n              //     \"Content-type\": \"application/json\",\r\n              //     Accept: \"application/json\",\r\n              //   },\r\n              // },\r\n            // )\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n              if (data.message === \"회원가입을 먼저 해주세요.\") {\r\n                //main으로 보내고 거기서 모달 띄우는 방법??\r\n                navigate(\"/signupModal\");\r\n              } else {\r\n                navigate(\"/main\");\r\n              }\r\n            });\r\n        } else {\r\n          navigate(\"/\");\r\n        }\r\n        return 0;\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!code) return;\r\n    getKakaoToken();\r\n  }, []);\r\n\r\n  return <p>카카오 로그인 중</p>;\r\n};\r\n\r\nexport default KakaoLoginHandler;\r\n"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,iBAAiB,GAAG,MAAM;EAAA;;EAC9B,MAAMC,QAAQ,GAAGH,WAAW,EAA5B;EACA,MAAMI,YAAY,GAAG,kCAArB;EACA,MAAMC,YAAY,GAAG,kCAArB,CAH8B,CAI9B;;EACA,IAAIC,IAAI,GAAG,IAAIC,GAAJ,CAAQC,MAAM,CAACC,QAAP,CAAgBC,IAAxB,EAA8BC,YAA9B,CAA2CC,GAA3C,CAA+C,MAA/C,CAAX,CAL8B,CAO9B;;EACA,MAAMC,aAAa,GAAG,MAAM;IAC1BC,KAAK,CAAC,qCAAD,EAAwC;MAC3CC,MAAM,EAAE,MADmC;MAE3CC,OAAO,EAAE;QACP,gBAAgB;MADT,CAFkC;MAK3CC,IAAI,EAAG,2CAA0Cb,YAAa,iBAAgBC,YAAa,SAAQC,IAAK;IAL7D,CAAxC,CAAL,CAOGY,IAPH,CAOSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAPjB,EAQGF,IARH,CAQSG,IAAD,IAAU;MACd,IAAIA,IAAI,CAACC,YAAT,EAAuB;QACrB;QACAR,KAAK,CAAC,4CAAD,EAA+C;UAClDC,MAAM,EAAE,MAD0C;UAElDC,OAAO,EAAE;YAAE,gBAAgB;UAAlB,CAFyC;UAGlDC,IAAI,EAAEM,IAAI,CAACC,SAAL,CAAe;YACnBC,WAAW,EAAEJ,IAAI,CAACC,YADC;YAEnBI,SAAS,EAAE;UAFQ,CAAf;QAH4C,CAA/C,CAAL,CAQA;QACA;QACA;QACA;QACA;QACA;QACA;QACI;QACA;QACA;QACA;QACA;QACA;QACF;QArBF,CAsBGR,IAtBH,CAsBSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAtBjB,EAuBGF,IAvBH,CAuBSG,IAAD,IAAU;UACd,IAAIA,IAAI,CAACM,OAAL,KAAiB,gBAArB,EAAuC;YACrC;YACAxB,QAAQ,CAAC,cAAD,CAAR;UACD,CAHD,MAGO;YACLA,QAAQ,CAAC,OAAD,CAAR;UACD;QACF,CA9BH;MA+BD,CAjCD,MAiCO;QACLA,QAAQ,CAAC,GAAD,CAAR;MACD;;MACD,OAAO,CAAP;IACD,CA9CH;EA+CD,CAhDD;;EAkDAJ,SAAS,CAAC,MAAM;IACd,IAAI,CAACO,IAAL,EAAW;IACXO,aAAa;EACd,CAHQ,EAGN,EAHM,CAAT;EAKA,oBAAO;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QAAP;AACD,CAhED;;GAAMX,iB;UACaF,W;;;KADbE,iB;AAkEN,eAAeA,iBAAf"},"metadata":{},"sourceType":"module"}